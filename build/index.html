<!doctypehtml><html lang=en-us><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><title>PeanutGB</title><style>body,html{height:100%;margin:0;padding:0}body{display:flex;flex-direction:column;align-items:center;justify-content:center}.gb{position:relative;border-radius:16px;border:4px dashed transparent}.dragover{border-color:red}#canvas{position:absolute;left:108px;top:121px;outline:0;border-radius:2px;border:1px solid #000;background:#88c070}</style></head><body><div class=gb id=container><img src=peanutgb.svg><canvas class=emscripten id=canvas oncontextmenu=event.preventDefault() tabindex=-1></canvas></div><script>const COLORS=[{r:223,g:248,b:209},{r:136,g:193,b:112},{r:52,g:104,b:86},{r:8,g:24,b:32}];let audioCtx,js_run_frame,js_set_joypad,buttons={a:!1,b:!1,select:!1,start:!1,right:!1,left:!1,up:!1,down:!1},container=document.getElementById("container"),canvasElement=document.getElementById("canvas"),ctx=canvasElement.getContext("2d");var Module={print(...e){console.log(...e)},setStatus(e){if(Module.setStatus.last??={time:Date.now(),text:""},e===Module.setStatus.last.text)return;let t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),n=Date.now();t&&n-Module.setStatus.last.time<30||(Module.setStatus.last.time=n,Module.setStatus.last.text=e)},totalDependencies:0,monitorRunDependencies(e){this.totalDependencies=Math.max(this.totalDependencies,e),Module.setStatus(e?"Preparing... ("+(this.totalDependencies-e)+"/"+this.totalDependencies+")":"All downloads complete.")},onRuntimeInitialized(){js_run_frame=Module.cwrap("js_run_frame",null,null),js_set_joypad=Module.cwrap("js_set_joypad",null,["bool","bool","bool","bool","bool","bool","bool","bool"])}};function run_frame(){js_set_joypad(buttons.a,buttons.b,buttons.select,buttons.start,buttons.right,buttons.left,buttons.up,buttons.down),js_run_frame(),requestAnimationFrame(run_frame)}function setKey(e,t){switch(e){case"KeyZ":buttons.a=t;break;case"KeyX":buttons.b=t;break;case"Backspace":buttons.select=t;break;case"Enter":buttons.start=t;break;case"ArrowRight":buttons.right=t;break;case"ArrowLeft":buttons.left=t;break;case"ArrowUp":buttons.up=t;break;case"ArrowDown":buttons.down=t}}Module.setStatus("Downloading..."),window.onerror=()=>{Module.setStatus("Exception thrown, see JavaScript console"),Module.setStatus=e=>{e&&console.error("[post-exception status] "+e)}},canvasElement.addEventListener("keydown",(e=>{setKey(e.code,!0)})),canvasElement.addEventListener("keyup",(e=>{setKey(e.code,!1)})),container.addEventListener("drop",(async e=>{if(e.preventDefault(),container.classList.remove("dragover"),e.dataTransfer.files.length){let t=e.dataTransfer.files[0],n=(await t.stream().getReader().read()).value,a=Module._malloc(n.length),o=new Uint8Array(Module.HEAPU8.buffer,a,n.length);o.set(n),Module.ccall("js_load_rom",null,["number","number"],[o.byteOffset,n.length]);Module.ccall("js_gb_init",null,null,null);canvasElement.focus(),audioCtx=new AudioContext,run_frame()}})),container.addEventListener("dragover",(e=>{e.preventDefault(),container.classList.add("dragover")})),container.addEventListener("dragleave",(e=>{container.classList.remove("dragover")}))</script><script async src=index.js></script></body></html>